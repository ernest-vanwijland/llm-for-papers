\section{Introduction}

Given a graph $G$ and a set $T$ of its vertices called \emph{terminals}, a \emph{cut sparsifier} of $G$ with respect to $T$ is a graph $G'$ with $T\subseteq V(G')$, such that for every partition $(T_1,T_2)$ of $T$ into non-empty subsets, the size of the minimum cut separating $T_1$ from $T_2$ in $G$ and the size of the minimum cut separating $T_1$ from $T_2$ in $G'$ are within some small multiplicative factor $q\ge 1$, which is also called the \emph{quality} of the sparsifier.


Karger \cite{karger1993global,karger1999random} first considered the special case where $T=V(G)=V(G')$ and $G'$ is required to be a subgraph of $G$, and
he used sampling approaches to construct quality-$(1+\varepsilon)$ cut sparsifiers with $O(n\log n/\varepsilon^2)$ edges.
Such sparsifiers are called \emph{edge sparsifiers}, since we are only allowed to sparsify the edges (not the vertices) and the goal is to minimize $|E(G')|$.
In this paper, we allow $G'$ to have a different set of vertices, and such graphs $G'$ are known as \emph{vertex sparsifiers}.
Constructing cut-preserving vertex sparsifiers with small quality and size (measured by the number of vertices in $G'$) has been a central problem in graph compression.

Cut-preserving vertex sparsifiers were first studied in the special case where $G'$ is only allowed to contain terminals (that is, $V(G')=T$). Moitra \cite{moitra2009approximation} first showed that every  $k$-terminal graph has a cut sparsifier with quality $O(\log k/\log\log k)$.
Then Charikar, Leighton, Li and Moitra \cite{charikar2010vertex} showed that such sparsifiers can be computed efficiently.
The best quality lower bound in this case is $\Omega(\sqrt{\log k}/\log\log k)$ \cite{makarychev2010metric,charikar2010vertex}, leaving a small gap to be closed. 
%
Therefore, the natural next question, which has been a central question on cut/flow sparsifiers over the past decade, is:

\vspace{-10pt}
\[\emph{Can better quality sparsifiers be achieved by allowing a small number of Steiner vertices}? 
\]
\vspace{-10pt}


For exact cut sparsifiers ($q=1$), it has been shown that every $k$-terminal graph admits an exact cut sparsifier of size at most $2^{2^k}$ \cite{hagerup1998characterizing,khan2014mimicking}, while the strongest lower bound is $2^{\Omega(k)}$ \cite{khan2014mimicking,karpov2017exponential}, leaving an exponential gap yet to be closed.
Since then the research on cut sparsifiers was diverted into two directions.
The first direction focuses on proving better size upper bounds for special families of graphs.
For example, for planar graphs, Krauthgamer and Rika \cite{krauthgamer2013mimicking,krauthgamer2017refined} showed that $2^{O(k)}$ vertices are sufficient for an exact cut sparsifier, and then Karpov, Philipzcuk and Zych-Pawlewicz \cite{karpov2017exponential} proved a lower bound of $2^{\Omega(k)}$, showing that the single exponential upper bound is almost tight.
Another example is graphs where each terminal has degree exactly $1$. For these graphs, Chuzhoy \cite{chuzhoy2012vertex} showed the construction for $O(1)$-quality sparsifiers of size $O(k^3)$ by contracting expanders, and Kratsch and Wahlstrom \cite{kratsch2012representative} constructed quality-$1$ sparsifiers of size $O(k^3)$ via a matroid-based approach.
%
The second direction focuses on constructing cut sparsifiers with a slightly worse quality of $(1+\eps)$ for small $\eps>0$.
Andoni, Gupta, and Krauthgamer \cite{andoni2014towards} initiated the study of quality-$(1+\eps)$ flow sparsifiers \footnote{Flow sparsifiers are concretely related to cut sparsifiers. We review the previous work and discuss the connection between them in \Cref{sec: related}.} (which are stronger versions of cut sparsifiers), established a framework of constructing flow sparsifiers via contractions with a doubly exponential upper bound. However, the only family that they managed to obtain a better-than-$2^{2^k}$ upper bound for is the family of quasi-bipartite graphs, graphs where every edge is incident to some terminal. They showed an upper bound of $\poly(k/\eps)$, via a sampling-based approach.
%
For quality-$(1+\eps)$ cut sparsifiers on quasi-bipartite graphs, the bound was improved to $\tilde O(k/\eps^2)$ by Jambulapati, Lee, Liu and Sidford \cite{jambulapati2023sparsifying}, also via a sampling-based approach.

Among the above algorithmic results, the most common approach for constructing cut sparsifiers is contraction. Specifically, we compute a partition $\fset$ of the vertices of $G$ into disjoint subsets, and then contract each subset of $\fset$ into a supernode.
The resulting graph is called a \emph{contraction-based cut sparsifier}.
%
Contraction-based cut sparsifiers may only increase the value of every terminal min-cut, which partly explains why contraction is a commonly adopted approach, as to analyze its quality it suffices to show that the min-cuts are not increased by too much.
For general graphs, a lower bound of $2^{2^{\Omega(k)}}$ (almost matching the upper bound of $2^{2^k}$) was proved \cite{karpov2017exponential} for contraction-based cut sparsifiers. It is therefore natural to ask whether or not better bounds can be achieved for special graphs.
Moreover, all the previous constructions of cut sparsifiers with Steiner nodes, except for the ones using matroid-based/sampling-based approaches, are contraction-based.
Therefore, it is natural to explore if contraction can give optimal constructions for cut sparsifiers.


\subsection{Our Results}


In this paper, we make progress on the above questions. Our first results, summarized as \Cref{main: upper} and \Cref{quasi_1}, are new size upper bounds on exact or quality-$(1+\eps)$ sparsifiers for special families of graphs.

\begin{theorem}
\label{main: upper}
For every integer $k\ge 1$ and real number $\eps>0$, every planar graph with $k$ terminals admits a quality-$(1+\eps)$ cut sparsifier on $O(k\cdot\poly(\log k/\eps))$ vertices, which is also a planar graph.
\end{theorem}

For planar graphs, our near-linear size bound is in sharp contrast with the single-exponential bound $2^{\Theta(k)}$ \cite{krauthgamer2013mimicking,krauthgamer2017refined,karpov2017exponential} for exact cut sparsifiers. In other words, \Cref{main: upper} shows that, for preserving cuts in planar graphs, we can trade a small loss in quality for a significant improvement in size.

\begin{theorem}
	\label{quasi_1}
For every integer $k\ge 1$, every quasi-bipartite graph with $k$ terminals admits an exact (quality-$1$) contraction-based cut sparsifier of size $2^{O(k^2\log k)}$, and there exists a quasi-bipartite graph with $k$ terminals whose exact contraction-based cut sparsifier must contain $\Omega(2^k)$ vertices.
\end{theorem}

\Cref{quasi_1} shows that, similar to planar graphs, the family of quasi-bipartite graphs also admit a single-exponential upper bound (even achievable by contraction-based sparsifiers), better than the doubly-exponential bound for general graphs \cite{hagerup1998characterizing,khan2014mimicking,karpov2017exponential}.

Next we turn to study contraction-based sparsifiers.
Our next result shows that contraction-based sparsifiers are not optimal constructions, as they give worse bounds for quasi-bipartite graphs.

\begin{theorem}
\label{main: lower}
For every integer $k\ge 1$ and real number $\eps>0$, there exists a quasi-bipartite graph with $k$ terminals, whose quality-$(1+\eps)$ contraction-based cut sparsifier must contain $k^{\tilde\Omega(1/\eps)}$ vertices.
\end{theorem}

Compared with the previous bounds $\poly(k/\eps)$ \cite{andoni2014towards} and $\tilde O(k/\eps^2)$ \cite{jambulapati2023sparsifying} (both obtained by sampling-based and therefore not contraction-based approaches), \Cref{main: lower} shows that contraction-based sparsifiers are sometimes provably suboptimal.

We then proceed to study the size upper bound for quality-$(1+\eps)$ contraction-based cut sparsifiers of quasi-bipartite graphs. Our last result, summarized in \Cref{quasi_apx}, shows that when $\eps$ is a constant, quasi-bipartite graphs have $\poly(k)$-sized contraction-based cut sparsifiers, complementing the lower bound in \Cref{main: lower}, in contrast with the $\Omega(2^k)$ lower bound for exact sparsifiers in \Cref{quasi_1}.

\begin{theorem}
\label{quasi_apx}
For every integer $k\ge 1$ and real number $\eps>0$, every quasi-bipartite graph with $k$ terminals admits a quality-$(1+\eps)$ contraction-based cut sparsifier of size $k^{O(1/\eps^2)}\cdot f(\eps)$, where $f$ is a function that only depends on $\eps$.
\end{theorem}

We summarize our results and provide some comparison with previous work in \Cref{table}.

\setlength{\tabcolsep}{0.5em} % for the horizontal padding
{\renewcommand{\arraystretch}{1.4}% for the vertical padding
\begin{table}[h]
\centering
	\begin{tabular}{|c|c|c|c|c|}
		\hline
		Graph Type                       & Quality      & Size                          & Contraction-based? & Citation                                                                                      \\  \hline
		\multirow{3}{*}{General }          & $1$          & $2^{2^k}$                & Yes            & \cite{hagerup1998characterizing,khan2014mimicking} \\ \cline{2-5}
		& $1$          & $2^{\Omega(k)}$               & No         &\cite{karpov2017exponential,khan2014mimicking}\\ 
		\cline{2-5}
		& $1$          & $2^{2^{\Omega(k)}}$               & Yes         &\cite{karpov2017exponential}\\\hline
		\multirow{3}{*}{Planar}          & $1$          & $2^{O(k)}$               & Yes            & \cite{krauthgamer2013mimicking,krauthgamer2017refined} \\ \cline{2-5}
		& $1$          & $2^{\Omega(k)}$               & No         &\cite{karpov2017exponential}\\
		\cline{2-5} 
		& $1+\eps$ & $O(k\cdot\poly(\log k/\eps))$ & No                & \Cref{main: upper}                                                           \\ \hline
		\multirow{3}{*}{Quasi-bipartite} & $1$          & $2^{O(k^2\log k)}, \Omega(2^{k})$                  & Yes               & \Cref{quasi_1}                                                              \\ \cline{2-5} 
		& $1+\eps$ & $\tilde O (k/\eps^2)$           & No                & \cite{jambulapati2023sparsifying}                                                    \\ \cline{2-5} 
		& $1+\eps$ & $k^{\tilde\Omega(1/\eps)}, k^{O(1/\eps^2)} f(\eps)$     & Yes               & \Cref{main: lower,quasi_apx}                                                           \\ \hline
	\end{tabular}
\caption{Results on exact or quality-$(1+\eps)$ cut sparsifiers for planar and quasi-bipartite graphs}
\label{table}
\end{table}
}


\input{tech_overview}


\paragraph{Concurrent Work.} Independent of work, Das, Kumar, and Vaz, showed in their work \cite{das2024nearly} that quasi-bipartite graphs admit exact non-contraction-based cut sparsifiers of size $2^{k^2}$ and exact contraction-based cut sparsifiers of size $2^{k^3}$. Our \Cref{quasi_1} gives a $2^{O(k^2\log k)}$ size bound for exact contraction-based cut sparsifiers, which is slightly stronger than their $2^{k^3}$ bound, and slightly weaker than their $2^{k^2}$ bound. They also have some results on flow sparsifiers. For example, quasi-bipartite graphs admit exact flow sparsifiers of size $3^{k^3}$, and treewidth-$w$ graphs admit quality-$O(\frac{\log w}{\log\log w})$ flow sparsifiers of size $O(kw)$.




\subsection{Related Work}
\label{sec: related}

\paragraph{Edge sparsifiers.} 
After Karger's result \cite{karger1999random} on cut-preserving edge sparsifiers, there are other work using sampling-based approaches. Benzcur and Karger \cite{benczur1996approximate} sampled edges based on inverse edge-strengths, and obtained a sparsifier of $O(n\log n/\eps^2)$ edges. Fung and Harvey \cite{fung2010graph} sampled edges according to their inverse edge-connectivity, and also obtained the bound of $O(n\log^2 n/\eps^2)$. Spielman and Srivastava \cite{spielman2011graph} sampled edges based on their inverse effective-resistance to obtain a spectral sparsifier (a generalization of cut sparsifiers) with size $O(n\log n/\eps^2)$. This bound was later improved by Batson, Spielman, and Srivastava \cite{batson2012twice} to $O(n/\eps^2)$.

\paragraph{Other work on cut sparsifiers.}
There are some work on (i) constructing better cut sparsifiers for  special families of graphs, for example trees \cite{goranci2017vertex} and planar graphs with all terminals lying on the same face \cite{goranci2017improved}, and graphs with bounded treewidth \cite{andoni2014towards}; (ii) preserving terminal min-cut values up to some threshold value \cite{chalermsook2021vertex,liu2020vertex}; and
(iii) dynamic cut/flow sparsifiers and their utilization in dynamic graph algorithms \cite{durfee2019fully,chen2020fast,goranci2021expander}.

\paragraph{Flow sparsifiers.}
Flow sparsifiers are highly correlated with cut sparsifiers.
Given a graph $G$ and a set $T$ of $k$ terminals, a graph $G'$ is a \emph{flow sparsifier} of $G$ with respect to $T$ with \emph{quality $q$}, iff every $G$-feasible multicommodity flow on $T$ can be routed in $G'$, and every $G'$-feasible multicommodity flow on $T$ can be routed in $G$ if the capacities of edges in $G$ are increased by factor $q$. Flow sparsifiers are stronger than cut sparsifiers, in the sense that quality-$q$ flow sparsifiers are automatically quality-$q$ cut sparsifiers, but the other direction is not true in general.

When no Steiner nodes are allowed,
Leighton and Moitra \cite{leighton2010extensions} showed the existence of quality-$O(\log k/\log\log k)$ flow sparsifiers. 
%Charikar, Leighton, Li and Moitra then \cite{charikar2010vertex} showed that they can be computed efficiently.
On the lower bound side, the first quality lower bound in \cite{leighton2010extensions} is $\Omega(\log\log k)$, and this was later improved to $\Omega(\sqrt{\log k/\log\log k})$ by Makarychev and Makarychev \cite{makarychev2010metric}.


In the setting where Steiner nodes are allowed,
Chuzhoy \cite{chuzhoy2012vertex} showed $O(1)$-quality contraction-based flow sparsifiers with size $C^{O(\log\log C)}$ exist, where $C$ is the total capacity of all edges incident to terminals (assuming that all edges have capacity at least $1$).
On the lower bound side, Krauthgamer and Mosenzon \cite{krauthgamer2023exact} showed that there exist $6$-terminal graphs whose quality-$1$ flow sparsifiers must have an arbitrarily large size (i.e., the size bound cannot depend only on $k$ and $\eps$). Chen and Tan \cite{chen20241+} showed that there exists $6$-terminal graphs whose quality-$(1+10^{-18})$ contraction-based flow sparsifiers must have an arbitrarily large size.


\subsection{Organization}
The rest of the paper is organized as follows. We start with some preliminaries and formal definitions in \Cref{sec: prelim}.
We first provide the construction of planar cut sparsifier in \Cref{sec: planar}, proving \Cref{main: upper}. We then show the construction of contraction-based cut sparsifiers for quasi-bipartite graphs in \Cref{sec: quasi_exact} and \Cref{sec: quasi_apx}, proving \Cref{quasi_1} and \Cref{quasi_apx}. Finally, we show the lower bound for quasi-bipartite graphs, giving the proof of \Cref{main: lower} in \Cref{sec: lower}.










